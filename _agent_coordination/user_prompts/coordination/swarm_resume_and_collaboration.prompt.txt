ðŸš€ SWARM RESUME & COLLABORATION PROTOCOL

# Context Variables (Provided at Runtime)
- project_root: "{{project_root}}"            # Root directory of the codebase
- agent_id: "{{agent_id}}"                    # Unique identifier for this agent
- shared_mailbox_dir: "{{shared_mailbox_dir}}"# Path to the shared mailbox root
- project_board_path: "{{project_board_path}}"# Path to project_board.json
- task_files: ["{{project_root}}/_agent_coordination/tasks/master_tasks_*.json"]
- discovered_tasks_path: "{{project_root}}/_agent_coordination/tasks/complete/discovered_tasks.json"

---

## Phase 1: Status & Claim
1. Inspect mailbox: `{{shared_mailbox_dir}}/agent_{{agent_id}}/mailbox.json`.
2. Update `{{project_board_path}}` with:
   - `"status": "busy"`
   - `"current_action": "claiming_task"`.
3. Open each file in `task_files` and find a task with no `"claimed_by"`.
4. Claim exactly one task by setting:
   - `"claimed_by": "{{agent_id}}"`
   - Save the updated file.

### Phase 1 Output
```json
{
  "phase": "claim_task",
  "task": {
    "file": "<path/to/file>",
    "task_id": "<task_id>",
    ...
  }
}
```

---

## Phase 2: Execute & Report
1. Perform the work as described by the claimed task.
2. On completion, update the task record:
   - `"status": "COMPLETED"`
   - `"completed_by": "{{agent_id}}"`
3. Append a completion notice to your mailbox:

### Phase 2 Output
```json
{
  "phase": "complete_task",
  "task": {
    "file": "<path/to/file>",
    "task_id": "<task_id>"
  },
  "mailbox_message": {
    "event": "task_completed",
    "task_id": "<task_id>",
    "completed_by": "{{agent_id}}"
  }
}
```

---

## Phase 3: Proposals
1. For any improvement idea, prefix with `/proposal:` and include suggestion text.
2. Send your proposal as JSON to a target agent's inbox:

### Phase 3 Output
```json
{
  "phase": "proposal",
  "target_agent_id": "<agent_id>",
  "proposal": "<proposal_text>"
}
```

---

## Phase 4: Discover New Tasks
1. When spotting a new issue or TODO, append to `{{discovered_tasks_path}}` with JSON:

### Phase 4 Output
```json
{
  "phase": "discover",
  "discovered_task": {
    "file": "<path>",
    "line_range": [start, end],
    "category": "<bug|enhancement|cleanup>",
    "description": "<description>",
    "discovered_by": "{{agent_id}}"
  }
}
```

---

## Phase 5: Collaborate & Loop
1. Send interim results or questions via JSON messages to other agents' mailboxes.
2. If tasks remain, return to Phase 1.
3. If no tasks remain, update `{{project_board_path}}` to:
   - `"status": "idle"`
   - `"current_action": null`

### Phase 5 Output
```json
{
  "phase": "idle",
  "status": "idle"
}
```

---

# Begin
Produce the JSON output for **Phase 1: Status & Claim**.