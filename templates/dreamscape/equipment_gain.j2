{# EDIT START - enhanced v3 #}
{#
Variables expected:
  player_name : str        â€“ Name of the player.
  item_name   : str        â€“ Name of the equipment gained.
  rarity      : str        â€“ Rarity tier (Common, Uncommon, Rare, Epic, Legendary).
  item_type   : str        â€“ (optional) Slot or class â€“ e.g., "Sword", "Armor".
  description : str        â€“ (optional) Flavor description of the item.
  timestamp   : str        â€“ (optional) ISO8601 or formatted acquisition time.
#}

{% set rarity_data = {
  'Common':     {'emoji': 'âšª', 'flavor': 'Everyday gear'},
  'Uncommon':   {'emoji': 'ðŸŸ¢', 'flavor': 'A notch above the ordinary'},
  'Rare':       {'emoji': 'ðŸ”µ', 'flavor': 'Standout relic'},
  'Epic':       {'emoji': 'ðŸŸ£', 'flavor': 'Legend in the making'},
  'Legendary':  {'emoji': 'ðŸŸ¡', 'flavor': 'Mythic masterpiece'}
} %}
{% set data = rarity_data.get(rarity, {'emoji':'ðŸ”¸','flavor':'Unknown treasure'}) %}
{% set emoji = data.emoji %}
{% set flavor = data.flavor %}

> ### ðŸŽ‰ Loot Acquired! {{ emoji }}  
> **{{ player_name }}** has obtained a **{{ rarity|upper }}** item:
> 
> - **Name:** {{ item_name|title }}
> - **Type:** {{ (item_type|title) if item_type else 'Equipment' }}
> - **Rarity Flavor:** *{{ flavor }}*
> {% if description %}
> - **Description:** {{ description }}
> {% endif %}
> {% if timestamp %}
> - **Acquired At:** {{ timestamp }}
> {% endif %}

{# EDIT END #}
